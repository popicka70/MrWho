# ============================================================================
# MrWhoOidc Configuration Template
# ============================================================================
# Copy this file to .env and customize the values for your deployment
# All values shown are examples - adjust for your environment
# ============================================================================

# ============================================================================
# CORE CONFIGURATION (REQUIRED)
# ============================================================================

# PostgreSQL Database Password (REQUIRED)
# Security: Use a strong password in production (min 16 chars, mixed case, numbers, symbols)
# Example production password: Use a password generator
POSTGRES_PASSWORD=changeme_in_production

# OIDC Public Base URL (REQUIRED)
# The public URL where your IdP will be accessible
# Must match your reverse proxy/load balancer configuration
# Examples:
#   Development: https://localhost:8443
#   Production: https://auth.yourdomain.com
OIDC_PUBLIC_BASE_URL=https://localhost:8443

# ============================================================================
# TLS/HTTPS CONFIGURATION (OPTIONAL)
# ============================================================================

# TLS Certificate Path (OPTIONAL)
# Path to your TLS certificate file inside the container
# Default: Uses included development certificate at /https/aspnetapp.pfx
# For production: Mount your own certificate and specify path
# ASPNETCORE_Kestrel__Certificates__Default__Path=/https/your-cert.pfx

# TLS Certificate Password (OPTIONAL)
# Password for your TLS certificate
# Default: "changeit" for development certificate
# For production: Use your certificate's password
CERT_PASSWORD=changeit

# ============================================================================
# MULTI-TENANCY CONFIGURATION (OPTIONAL)
# ============================================================================

# Enable Multi-Tenant Mode (OPTIONAL)
# Set to "true" to enable multi-tenancy support
# Default: false (single-tenant mode)
# When enabled: Tenants are isolated by subdomain or path
MULTITENANT_ENABLED=false

# Default Tenant Slug (OPTIONAL)
# The slug for the default tenant (used when multi-tenancy is enabled)
# Default: "default"
# Must be URL-safe (lowercase, no spaces)
MULTITENANT_DEFAULT_TENANT_SLUG=default

# ============================================================================
# REDIS CONFIGURATION (OPTIONAL - For High Performance)
# ============================================================================

# Enable Redis Caching (OPTIONAL)
# Set to "true" to enable Redis for caching and session storage
# Default: false (no caching)
# Performance impact: 30-50% faster, 60-80% reduced DB load
REDIS_ENABLED=false

# Redis Connection String (OPTIONAL)
# Connection string for Redis server
# Default: redis:6379,abortConnect=false
# Format: host:port,options
# Only used when REDIS_ENABLED=true
REDIS_CONNECTION_STRING=redis:6379,abortConnect=false

# ============================================================================
# EMAIL/SMTP CONFIGURATION (OPTIONAL - For Email Features)
# ============================================================================

# Enable Email Features (OPTIONAL)
# Set to "true" to enable email sending (password reset, notifications, etc.)
# Default: false (email features disabled)
MAIL_ENABLED=false

# SMTP Host (OPTIONAL)
# Hostname or IP address of your SMTP server
# Example: smtp.gmail.com, smtp.sendgrid.net, mailhog (for dev)
# Only used when MAIL_ENABLED=true
MAIL_SMTP_HOST=mailhog

# SMTP Port (OPTIONAL)
# Port number for SMTP server
# Common ports: 587 (TLS), 465 (SSL), 25 (plain), 1025 (MailHog dev)
# Default: 587
MAIL_SMTP_PORT=587

# SMTP Use SSL/TLS (OPTIONAL)
# Enable SSL/TLS for SMTP connection
# Default: true
# Set to false for development servers like MailHog
MAIL_SMTP_USE_SSL=true

# From Email Address (OPTIONAL)
# Email address that will appear as sender
# Example: no-reply@yourdomain.com
# Only used when MAIL_ENABLED=true
MAIL_FROM_ADDRESS=no-reply@mrwho.local

# From Name (OPTIONAL)
# Display name for the sender
# Default: "MrWhoOidc"
MAIL_FROM_NAME=MrWhoOidc

# SMTP Username (OPTIONAL)
# Username for SMTP authentication
# Leave empty if SMTP server doesn't require authentication
# Only used when MAIL_ENABLED=true
MAIL_SMTP_USERNAME=

# SMTP Password (OPTIONAL)
# Password for SMTP authentication
# Security: Store securely, don't commit to version control
# Only used when MAIL_ENABLED=true
MAIL_SMTP_PASSWORD=

# ============================================================================
# LOGGING CONFIGURATION (OPTIONAL)
# ============================================================================

# Logging Level (OPTIONAL)
# Controls verbosity of application logs
# Levels: Trace, Debug, Information, Warning, Error, Critical
# Default: Information
# Development: Debug or Information
# Production: Warning or Error
LOGGING_LEVEL=Information

# ASP.NET Core Logging Level (OPTIONAL)
# Controls verbosity of ASP.NET Core framework logs
# Default: Warning (less verbose than app logs)
LOGGING_LEVEL_ASPNETCORE=Warning

# ============================================================================
# ADVANCED CONFIGURATION (OPTIONAL - Usually not needed)
# ============================================================================

# ASP.NET Core Environment (OPTIONAL)
# Sets the application environment
# Values: Development, Staging, Production
# Default: Production
# Affects error pages, logging detail, debugging features
# ASPNETCORE_ENVIRONMENT=Production

# Database Connection String Override (OPTIONAL)
# Full PostgreSQL connection string
# Default: Constructed from POSTGRES_PASSWORD and docker-compose service names
# Only override if using external database or custom configuration
# CONNECTION_STRING_AUTHDB=Host=postgres;Port=5432;Database=authdb;Username=oidc;Password=${POSTGRES_PASSWORD};Include Error Detail=false

# HTTP Port (OPTIONAL)
# Port for HTTP endpoint (redirects to HTTPS)
# Default: 8080
# Mapped to 8081 on host in docker-compose to avoid conflicts
# ASPNETCORE_HTTP_PORT=8080

# HTTPS Port (OPTIONAL)
# Port for HTTPS endpoint
# Default: 8443
# ASPNETCORE_HTTPS_PORT=8443

# ============================================================================
# DEPLOYMENT NOTES
# ============================================================================

# DEVELOPMENT DEPLOYMENT:
# - Use default values for most settings
# - POSTGRES_PASSWORD: Use simple password (still keep it secret)
# - OIDC_PUBLIC_BASE_URL: https://localhost:8443
# - MULTITENANT_ENABLED: false
# - REDIS_ENABLED: false (unless testing performance)
# - MAIL_ENABLED: true with MailHog (for testing)

# PRODUCTION DEPLOYMENT:
# - POSTGRES_PASSWORD: Strong password (16+ chars, mixed case, numbers, symbols)
# - OIDC_PUBLIC_BASE_URL: Your public domain (https://auth.yourdomain.com)
# - CERT_PASSWORD: Your TLS certificate password
# - MULTITENANT_ENABLED: true (if multi-tenancy needed)
# - REDIS_ENABLED: true (for better performance)
# - MAIL_ENABLED: true with production SMTP server
# - LOGGING_LEVEL: Warning or Error
# - Set resource limits in docker-compose.yml
# - Enable security hardening (non-root, read-only volumes)

# SECURITY CHECKLIST:
# - [ ] Changed POSTGRES_PASSWORD from default
# - [ ] Using production-grade TLS certificate (not self-signed)
# - [ ] OIDC_PUBLIC_BASE_URL matches your public domain
# - [ ] SMTP credentials stored securely
# - [ ] .env file NOT committed to version control
# - [ ] Log level appropriate for environment
# - [ ] Database connection uses Include Error Detail=false (production)

# For more information:
# - Deployment Guide: /docs/deployment-guide.md
# - Configuration Reference: /docs/configuration-reference.md
# - Security Best Practices: /docs/docker-security-best-practices.md
