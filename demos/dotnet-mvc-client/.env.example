# MrWhoOidc .NET MVC Demo - Environment Configuration

# =============================================================================
# OIDC Provider Configuration
# =============================================================================

# OIDC Authority (issuer URL)
# Default: https://localhost:8443 for local docker-compose deployment
MRWHOOIDC__ISSUER=https://localhost:8443

# Client ID registered in MrWhoOidc Admin UI
# You must register this client before running the demo
MRWHOOIDC__CLIENTID=dotnet-mvc-demo

# Client Secret from MrWhoOidc Admin UI
# ⚠️  REQUIRED: Replace with actual secret from Admin UI after client registration
MRWHOOIDC__CLIENTSECRET=your-client-secret-from-admin-ui

# Scopes requested during authentication
# openid: Required for OIDC
# profile: User profile information
# email: User email address
# offline_access: Refresh tokens for long-lived sessions
MRWHOOIDC__SCOPES__0=openid
MRWHOOIDC__SCOPES__1=profile
MRWHOOIDC__SCOPES__2=email
MRWHOOIDC__SCOPES__3=offline_access

# Use PKCE (Proof Key for Code Exchange) for enhanced security
# Recommended: true
MRWHOOIDC__USEPKCE=true

# Require HTTPS for OIDC metadata endpoint
# Set to false only for development with HTTP
MRWHOOIDC__REQUIREHTTPSMETADATA=true

# =============================================================================
# Application Configuration
# =============================================================================

# Application listen address and port
# Default: http://localhost:5001
ASPNETCORE_URLS=http://localhost:5001

# Logging level
# Options: Trace, Debug, Information, Warning, Error, Critical
LOGGING__LOGLEVEL__DEFAULT=Information
LOGGING__LOGLEVEL__MICROSOFT.ASPNETCORE=Warning

# =============================================================================
# Client Registration Instructions
# =============================================================================
#
# 1. Start MrWhoOidc: docker compose up -d
# 2. Access Admin UI: https://localhost:8443/admin
# 3. Login with default credentials: admin / Admin123!
# 4. Navigate to "Client Management" → "Create Client"
# 5. Configure:
#    - Client ID: dotnet-mvc-demo
#    - Client Type: Confidential
#    - Grant Types: Authorization Code
#    - Redirect URIs: http://localhost:5001/signin-oidc
#    - Post Logout Redirect URIs: http://localhost:5001/signout-callback-oidc
#    - Allowed Scopes: openid, profile, email, offline_access
# 6. Copy the generated Client Secret
# 7. Update MRWHOOIDC__CLIENTSECRET above
# 8. Save this file as .env in the demo directory
# 9. Run: dotnet run
#
# =============================================================================
