@page "/account/login"
@inject NavigationManager Navigation
@inject ILogger<LoginRedirect> Logger

@code {
    [SupplyParameterFromQuery(Name = "returnUrl")]
    public string? ReturnUrl { get; set; }

    protected override void OnInitialized()
    {
        Logger.LogInformation("Redirecting to OpenID Connect login. ReturnUrl: {ReturnUrl}", ReturnUrl);
        
        // Trigger OpenID Connect authentication
        var challengeUrl = "/account/challenge";
        if (!string.IsNullOrEmpty(ReturnUrl))
        {
            challengeUrl += $"?returnUrl={Uri.EscapeDataString(ReturnUrl)}";
        }
        
        Navigation.NavigateTo(challengeUrl, forceLoad: true);
    }
}